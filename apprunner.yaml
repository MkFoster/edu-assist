version: 1.0
runtime: python3
build:
    commands:
        build:
            - pip3 install -r requirements.txt
run:
    command: uvicorn web_app:app --host 0.0.0.0 --port 8000
    network:
        port: 8000
        env: PORT
    env:
        - name: PORT
          value: "8000"
        - name: AWS_REGION
          value: "us-east-1"
        - name: STRANDS_MODEL_PROVIDER
          value: "bedrock"
        - name: STRANDS_MODEL_ID
          value: "anthropic.claude-sonnet-4-5-20250929-v1:0"
    secrets:
        - name: AWS_ACCESS_KEY_ID
          value-from: "arn:aws:secretsmanager:us-east-1:745851906253:secret:edu-assist-sec-28msDW:AWS_ACCESS_KEY_ID::"
        - name: AWS_SECRET_ACCESS_KEY
          value-from: "arn:aws:secretsmanager:us-east-1:745851906253:secret:edu-assist-sec-28msDW:AWS_SECRET_ACCESS_KEY::"
        - name: COLLEGE_SCORECARD_API_KEY
          value-from: "arn:aws:secretsmanager:us-east-1:745851906253:secret:edu-assist-sec-28msDW:COLLEGE_SCORECARD_API_KEY::"
